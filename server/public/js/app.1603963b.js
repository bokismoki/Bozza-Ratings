(function(e){function t(t){for(var o,i,a=t[0],c=t[1],u=t[2],p=0,d=[];p<a.length;p++)i=a[p],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&d.push(n[i][0]),n[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);l&&l(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],o=!0,a=1;a<r.length;a++){var c=r[a];0!==n[c]&&(o=!1)}o&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var o={},n={app:0},s=[];function i(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=o,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(r,o,function(t){return e[t]}.bind(null,o));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"097e":function(e,t,r){"use strict";var o=r("fa0d"),n=r.n(o);n.a},1:function(e,t){},"17f6":function(e,t,r){},"3f57":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var o=r("2b0e"),n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app"},[o("notifications",{attrs:{group:"authorization-error"}}),e.isLoading?o("div",{staticClass:"loaderContainer"},[o("img",{staticClass:"loader",attrs:{src:r("b157"),alt:"Loading Animation"}})]):e._e(),o("i",{staticClass:"fa fa-bars fa-2x showNav",on:{click:function(t){e.navIsOpen=!0}}}),o("nav",{staticClass:"nav",class:{show:e.navIsOpen}},[o("i",{staticClass:"fa fa-times fa-2x closeNav",on:{click:function(t){e.navIsOpen=!1}}}),e._m(0),o("div",{staticClass:"links"},[e.isLogged?o("a",{staticClass:"logout",on:{click:e.logout}},[o("i",{staticClass:"fas fa-sign-out-alt fa-2x"})]):o("router-link",{attrs:{to:{name:"signup"}}},[o("i",{staticClass:"fas fa-user-plus fa-2x"})]),e.isLogged?e._e():o("router-link",{attrs:{to:{name:"login"}}},[o("i",{staticClass:"fas fa-sign-in-alt fa-2x"})]),o("router-link",{attrs:{to:{name:"movies"}}},[o("i",{staticClass:"fas fa-film fa-2x"})]),e.isLogged?o("router-link",{attrs:{to:{name:"settings"}}},[o("i",{staticClass:"fas fa-cogs fa-2x"})]):e._e()],1),e.routeIsMovies?o("button",{staticClass:"optionsBtn",on:{click:e.toggleOptions}},[e._v(e._s(e.optionsBtn))]):e._e(),e.optionsIsOpen&&e.routeIsMovies?o("div",{staticClass:"options"},[o("p",[e._v("Sort by date:")]),o("input",{attrs:{type:"radio",id:"new",name:"sort",checked:""},on:{change:e.applyFilter}}),o("label",{attrs:{for:"new"}},[e._v("New")]),o("br"),o("input",{attrs:{type:"radio",id:"old",name:"sort"},on:{change:e.applyFilter}}),o("label",{attrs:{for:"old"}},[e._v("Old")]),o("p",[e._v("Sort by rating:")]),o("input",{attrs:{type:"radio",id:"high",name:"sort"},on:{change:e.applyFilter}}),o("label",{attrs:{for:"high"}},[e._v("High")]),o("br"),o("input",{attrs:{type:"radio",id:"low",name:"sort"},on:{change:e.applyFilter}}),o("label",{attrs:{for:"low"}},[e._v("Low")])]):e._e(),o("router-link",{attrs:{to:{name:"chat"}}},[o("i",{staticClass:"chat fa-2x fas fa-comment"})])],1),o("router-view")],1)},s=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"logo"},[o("h1",{staticClass:"logoName"},[e._v("Bozza Ratings")]),o("img",{staticClass:"logoImg",attrs:{src:r("c2fb"),alt:"Bozza Ratings Logo"}})])}],i=(r("a4d3"),r("4de4"),r("4160"),r("b0c0"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("2fa7")),a=r("2f62");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(r,!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l={name:"app",data:function(){return{navIsOpen:!1,optionsIsOpen:!1}},computed:u({},Object(a["b"])(["isLogged","isLoading"]),{optionsBtn:function(){return this.optionsIsOpen?"Hide Options":"Show Options"},routeIsMovies:function(){return"movies"===this.$route.name}}),methods:{logout:function(){this.$store.dispatch("logout")},applyFilter:function(e){this.$store.dispatch("sortMovies",e.target.id),localStorage.setItem("sortOption",e.target.id)},toggleOptions:function(){this.optionsIsOpen=!this.optionsIsOpen}}},p=l,d=(r("5c0b"),r("2877")),m=Object(d["a"])(p,n,s,!1,null,null,null),f=m.exports,g=(r("45fc"),r("4fad"),r("8c4f")),v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"movies"},[r("button",{staticClass:"refreshMovies",on:{click:e.refreshMovies}},[r("i",{staticClass:"fas fa-redo"})]),r("h1",{staticClass:"viewTitle"},[e._v("Movies")]),e.isLogged?r("button",{staticClass:"showFormBtn",on:{click:function(t){e.formActive=!e.formActive}}},[e._v(e._s(e.formBtn))]):e._e(),e.formActive&&e.isLogged?r("form",{on:{submit:function(t){return t.preventDefault(),e.addMovie(t)}}},[e.errorMsg?r("h2",{staticClass:"error"},[e._v(e._s(e.errorMsg))]):e._e(),r("label",{attrs:{for:"title"}},[e._v("Movie Title:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.movie.title,expression:"movie.title"}],attrs:{type:"text",placeholder:"Title*",id:"title",required:""},domProps:{value:e.movie.title},on:{input:function(t){t.target.composing||e.$set(e.movie,"title",t.target.value)}}}),r("label",{attrs:{for:"description"}},[e._v("Movie Description:")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.movie.description,expression:"movie.description"}],attrs:{placeholder:"Description*",id:"description",required:""},domProps:{value:e.movie.description},on:{input:function(t){t.target.composing||e.$set(e.movie,"description",t.target.value)}}}),e._v(" "),r("label",{attrs:{for:"image"}},[e._v("Movie Image URL:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.movie.image,expression:"movie.image"}],attrs:{type:"text",placeholder:"Image URL*",id:"image",required:""},domProps:{value:e.movie.image},on:{input:function(t){t.target.composing||e.$set(e.movie,"image",t.target.value)}}}),r("button",{attrs:{type:"submit"}},[e._v("Add Movie")])]):e._e(),r("div",{staticClass:"moviesContainer"},e._l(e.displayedMovies,(function(t){return r("div",{key:t._id,staticClass:"movie",on:{click:function(r){return e.goToMovie(t._id)}}},[r("img",{attrs:{src:t.image},on:{error:e.brokenImg}}),r("h2",[e._v(e._s(t.title.length>45?t.title.substring(0,45)+"...":t.title))]),r("p",[e._v(e._s(t.description.substring(0,150))+"...")]),r("span",{staticClass:"date"},[e._v(e._s(t.createdOn.substring(0,10)))])])})),0),r("div",{staticClass:"paginationButtons"},e._l(e.numberOfButtons,(function(t,o){return r("button",{key:o,class:{active:e.activePaginationIndex===o},on:{click:function(t){return e.updateActivePaginationIndex(o)}}},[e._v(e._s(o+1))])})),0)])},h=[];function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(r,!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _={name:"movies",data:function(){return{movie:{title:"",description:"",image:""},formActive:!1}},computed:O({},Object(a["b"])(["errorMsg","movies","isLogged","numberOfButtons","displayedMovies","activePaginationIndex"]),{formBtn:function(){return this.formActive?"Hide Form":"Add Movie"}}),methods:{getMovies:function(){var e=this;0===this.$store.state.movies.length&&(this.$store.dispatch("updateIsLoading",!0),this.$store.dispatch("getMovies").then((function(){e.$store.dispatch("updateIsLoading",!1)})))},refreshMovies:function(){var e=this;this.$store.dispatch("updateIsLoading",!0),this.$store.dispatch("getMovies").then((function(){e.$store.dispatch("updateIsLoading",!1)}))},brokenImg:function(e){e.target.src=r("d0a2")},addMovie:function(){var e=this;this.$store.dispatch("updateIsLoading",!0),this.$store.dispatch("addMovie",this.movie).then((function(){e.$store.state.errorMsg||(e.formActive=!1),e.$store.dispatch("updateIsLoading",!1)}))},goToMovie:function(e){var t=this;this.$store.dispatch("getMovie",e),this.$store.dispatch("updateIsLoading",!0),setTimeout((function(){t.$router.push({name:"movie",params:{id:e}}),t.$store.dispatch("updateIsLoading",!1)}),1e3)},updateActivePaginationIndex:function(e){this.$store.state.activePaginationIndex!==e&&this.$store.dispatch("updateActivePaginationIndex",e)}},created:function(){this.getMovies()},watch:{movie:{deep:!0,handler:function(){this.$store.state.errorMsg&&this.$store.commit("SET_ERROR_MSG","")}}}},y=_,w=(r("097e"),Object(d["a"])(y,v,h,!1,null,null,null)),I=w.exports,j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"signup"},[r("h1",{staticClass:"viewTitle"},[e._v("Signup")]),r("form",{on:{submit:function(t){return t.preventDefault(),e.signup(t)}}},[e.errorMsg?r("h2",{staticClass:"error"},[e._v(e._s(e.errorMsg))]):e._e(),r("label",{attrs:{for:"username"}},[e._v("Username:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"}],attrs:{type:"text",placeholder:"Username*",id:"username",required:"",minlength:"5"},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}}),r("label",{attrs:{for:"email"}},[e._v("Email:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{type:"email",placeholder:"Email*",id:"email",required:""},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}}),r("label",{attrs:{for:"password"}},[e._v("Password:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password",placeholder:"Password*",id:"password",required:""},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),r("button",{attrs:{type:"submit"}},[e._v("Signup")])])])},M=[];function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(r,!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S={name:"signup",data:function(){return{user:{username:"",email:"",password:""}}},methods:{signup:function(){var e=this;this.$store.dispatch("updateIsLoading",!0),this.$store.dispatch("signup",this.user).then((function(){e.$store.dispatch("updateIsLoading",!1)}))}},computed:E({},Object(a["b"])(["errorMsg"])),watch:{user:{deep:!0,handler:function(){this.$store.state.errorMsg&&this.$store.commit("SET_ERROR_MSG","")}}}},$=S,C=Object(d["a"])($,j,M,!1,null,null,null),L=C.exports,x=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("h1",{staticClass:"viewTitle"},[e._v("Login")]),r("form",{on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[e.errorMsg?r("h2",{staticClass:"error"},[e._v(e._s(e.errorMsg))]):e._e(),r("label",{attrs:{for:"email"}},[e._v("Email:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{type:"email",placeholder:"Email*",id:"email",required:""},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}}),r("label",{attrs:{for:"password"}},[e._v("Password:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password",placeholder:"Password*",id:"password",required:""},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),r("button",{attrs:{type:"submit"}},[e._v("Signup")])])])},D=[];function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(r,!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k={name:"login",data:function(){return{user:{email:"",password:""}}},methods:{login:function(){var e=this;this.$store.dispatch("updateIsLoading",!0),this.$store.dispatch("login",this.user).then((function(){e.$store.dispatch("updateIsLoading",!1)}))}},computed:R({},Object(a["b"])(["errorMsg"])),watch:{user:{deep:!0,handler:function(){this.$store.state.errorMsg&&this.$store.commit("SET_ERROR_MSG","")}}}},A=k,U=Object(d["a"])(A,x,D,!1,null,null,null),G=U.exports,N=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"settings"},[r("h1",{staticClass:"viewTitle"},[e._v("Settings")]),r("div",{staticClass:"profile"},[r("input",{attrs:{type:"file",id:"file"},on:{change:e.processFile}}),r("label",{attrs:{for:"file"}},[r("img",{staticClass:"profileImg",attrs:{src:e.loggedUser.profileImage,alt:"Profile Image"}})]),r("h2",{staticClass:"username"},[e._v(e._s(e.loggedUser.username))])])])},B=[];r("caad"),r("2532");function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(r,!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var V={name:"settings",computed:q({},Object(a["b"])(["loggedUser"])),methods:{processFile:function(){var e=this,t=document.querySelector(".profileImg"),r=document.querySelector("input[type=file]").files[0],o=new FileReader;o.addEventListener("load",(function(){t.src=o.result,e.$store.state.loggedUser.profileImage!==o.result&&(e.$store.dispatch("updateIsLoading",!0),e.$store.dispatch("updateProfileImage",o.result).then((function(){e.$store.dispatch("updateIsLoading",!1)})))})),r.type.includes("image")?o.readAsDataURL(r):console.error("Please select the right image format!")}}},F=V,H=(r("e1c8"),Object(d["a"])(F,N,B,!1,null,null,null)),J=H.exports,X=(r("7db0"),r("fb6a"),r("4e82"),r("a434"),r("bc3a")),K=r.n(X);function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(r,!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}o["default"].use(a["a"]);var Y=new a["a"].Store({state:{axiosURL:"https://afternoon-earth-17653.herokuapp.com",errorMsg:"",isLogged:!1,movies:[],loggedUser:{},selectedMovie:{},activePaginationIndex:0,isLoading:!1},getters:{isLogged:function(e){return e.isLogged},errorMsg:function(e){return e.errorMsg},movies:function(e){return e.movies},loggedUser:function(e){return e.loggedUser},selectedMovie:function(e){return e.selectedMovie},numberOfButtons:function(e){return Math.ceil(e.movies.length/8)},displayedMovies:function(e){return e.movies.slice().splice(8*e.activePaginationIndex,8)},activePaginationIndex:function(e){return e.activePaginationIndex},isLoading:function(e){return e.isLoading}},mutations:{SET_ERROR_MSG:function(e,t){e.errorMsg=t},SET_IS_LOGGED:function(e,t){e.isLogged=t},GET_MOVIES:function(e,t){e.movies=t},SET_LOGGED_USER:function(e,t){e.loggedUser=t},ADD_MOVIE:function(e,t){e.movies.unshift(t)},UPDATE_PROFILE_IMAGE:function(e,t){e.loggedUser.profileImage=t},SORT_MOVIES:function(e,t){e.movies=t},GET_MOVIE:function(e,t){e.selectedMovie=e.movies.find((function(e){return e._id===t}))},UPDATE_ACTIVE_PAGINATION_INDEX:function(e,t){e.activePaginationIndex=t},UPDATE_IS_LOADING:function(e,t){e.isLoading=t}},actions:{signup:function(e,t){return K.a.post(e.state.axiosURL+"/signup",t,{headers:{"content-type":"application/json"}}).then((function(t){t.data.message?e.commit("SET_ERROR_MSG",t.data.message):he.push({name:"login"})})).catch((function(e){console.error(e)}))},login:function(e,t){return K.a.post(e.state.axiosURL+"/login",t,{headers:{"content-type":"application/json"}}).then((function(t){if(t.data.message)e.commit("SET_ERROR_MSG",t.data.message);else{var r=t.data,o=r.username,n=r.profileImage,s=r._id,i=r.token;localStorage.setItem("jwt",i),e.commit("SET_LOGGED_USER",{username:o,profileImage:n,_id:s}),e.commit("SET_IS_LOGGED",!0),he.push({name:"movies"})}})).catch((function(e){console.error(e)}))},isLogged:function(e,t){e.commit("SET_IS_LOGGED",t)},getMovies:function(e){return K.a.get(e.state.axiosURL+"/movies").then((function(t){if(e.commit("GET_MOVIES",t.data),null!==localStorage.getItem("sortOption")){var r=localStorage.getItem("sortOption");e.dispatch("sortMovies",r)}})).catch((function(e){console.error(e)}))},logout:function(e){localStorage.removeItem("jwt"),e.commit("SET_IS_LOGGED",!1),e.commit("SET_LOGGED_USER",{}),he.push({name:"login"})},addMovie:function(e,t){return K.a.post(e.state.axiosURL+"/movies",W({},t,{createdBy:{username:e.state.loggedUser.username,profileImage:e.state.loggedUser.profileImage}}),{headers:{"content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(t){t.data.message?e.commit("SET_ERROR_MSG",t.data.message):t.data.authorize?(console.error(t.data.authorize),o["default"].notify({group:"authorization-error",type:"error",title:"Authorization Error",text:"Invalid Token!"})):e.commit("ADD_MOVIE",t.data)})).catch((function(e){console.error(e)}))},updateProfileImage:function(e,t){return K.a.patch(e.state.axiosURL+"/user/"+e.state.loggedUser._id,{url:t},{headers:{"content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(t){t.data.authorize?(console.error(t.data.authorize),o["default"].notify({group:"authorization-error",type:"error",title:"Authorization Error",text:"Invalid Token!"})):(e.commit("UPDATE_PROFILE_IMAGE",t.data),e.dispatch("getMovies"))})).catch((function(e){console.error(e)}))},sortMovies:function(e,t){var r;switch(t){case"new":r=e.state.movies.sort((function(e,t){return e.createdOn>t.createdOn?-1:1})),e.commit("SORT_MOVIES",r);break;case"old":r=e.state.movies.sort((function(e,t){return e.createdOn>t.createdOn?1:-1})),e.commit("SORT_MOVIES",r);break;case"high":r=e.state.movies.sort((function(e,t){return e.rating>t.rating?-1:1})),e.commit("SORT_MOVIES",r);break;case"low":r=e.state.movies.sort((function(e,t){return e.rating>t.rating?1:-1})),e.commit("SORT_MOVIES",r)}},getMovie:function(e,t){e.commit("GET_MOVIE",t)},updateActivePaginationIndex:function(e,t){e.commit("UPDATE_ACTIVE_PAGINATION_INDEX",t)},deleteMovie:function(e,t){return K.a.delete(e.state.axiosURL+"/delete/"+t,{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){e.data.authorize?(console.error(e.data.authorize),o["default"].notify({group:"authorization-error",type:"error",title:"Authorization Error",text:"Invalid Token!"})):console.log("Movie with the id: "+e.data._id+" has been deleted.")})).catch((function(e){console.error(e)}))},updateIsLoading:function(e,t){e.commit("UPDATE_IS_LOADING",t)}}}),Z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"moviee"},[r("div",{staticClass:"createdBy"},[r("p",[e._v(" Created by: "),r("span",[e._v(e._s(e.selectedMovie.createdBy.username))])]),r("img",{attrs:{src:e.selectedMovie.createdBy.profileImage}})]),r("h1",[e._v(e._s(e.selectedMovie.title))]),r("p",[e._v(e._s(e.selectedMovie.description))]),r("img",{attrs:{src:e.selectedMovie.image},on:{error:e.brokenImg}}),r("div",{staticClass:"stars"},e._l(5,(function(t,o){return r("i",{key:o,staticClass:"fa fa-star",on:{click:function(t){return e.updateRating(o)}}})})),0),e.isDeletable?r("button",{staticClass:"removeBtn",on:{click:e.deleteMovie}},[e._v("Remove")]):e._e()])},ee=[];function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(r,!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var oe={name:"movie",data:function(){return{}},mounted:function(){this.colorStars()},computed:re({},Object(a["b"])(["selectedMovie"]),{isDeletable:function(){return this.$store.state.loggedUser.username===this.$store.state.selectedMovie.createdBy.username}}),methods:{colorStars:function(){var e=this,t=document.querySelectorAll(".fa-star"),r=0,o=setInterval((function(){t[r].style.color="#f7be16",r++,r===e.$store.state.selectedMovie.rating&&clearInterval(o)}),150)},updateRating:function(e){var t=document.querySelectorAll(".fa-star");t.forEach((function(e){return e.style.color="#000"}));for(var r=0;r<=e;r++)t[r].style.color="#f7be16"},brokenImg:function(e){e.target.src=r("d0a2")},deleteMovie:function(){var e=this;this.$store.dispatch("updateIsLoading",!0),this.$store.dispatch("deleteMovie",this.$route.params.id).then((function(){e.$store.dispatch("getMovies").then((function(){e.$store.dispatch("updateIsLoading",!1),e.$router.push({name:"movies"})}))}))}}},ne=oe,se=(r("f2cc"),Object(d["a"])(ne,Z,ee,!1,null,null,null)),ie=se.exports,ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"chat"},[r("p",{staticClass:"connection"},[e._v(" New Connection: "),r("span",[e._v(e._s(e.newUser))])]),r("h1",{staticClass:"viewTitle"},[e._v("CHAT")]),r("div",{staticClass:"messagesContainer"},[r("div",{staticClass:"messages"},e._l(e.messages,(function(t,o){return r("p",{key:o,staticClass:"message"},[r("img",{attrs:{src:t.profileImage}}),r("span",[e._v(e._s(t.username)+":")]),r("span",{staticClass:"color"},[e._v(e._s(t.message))])])})),0),r("form",{on:{submit:function(t){return t.preventDefault(),e.sendMsg(t)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.newMsg,expression:"newMsg"}],attrs:{type:"text"},domProps:{value:e.newMsg},on:{input:function(t){t.target.composing||(e.newMsg=t.target.value)}}}),r("button",{staticClass:"sendMsgBtn",attrs:{type:"submit"}},[e._v("Send Msg")])])])])},ce=[],ue=(r("498a"),r("8055")),le=r.n(ue),pe={name:"chat",data:function(){return{socket:le()("https://afternoon-earth-17653.herokuapp.com"),messages:[],newUser:"",newMsg:""}},methods:{listen:function(){var e=this;this.socket.on("shareNewUser",(function(t){e.newUser=t})),this.socket.on("sendNewMsg",(function(t){e.messages.push({username:t.username,profileImage:t.profileImage,message:t.message});var r=document.querySelector(".messages");r.scrollTop=r.scrollHeight}))},sendMsg:function(){this.newMsg.trim()&&(this.socket.emit("newMsg",{username:this.$store.state.loggedUser.username,profileImage:this.$store.state.loggedUser.profileImage,message:this.newMsg}),this.newMsg="")}},mounted:function(){this.socket.emit("newUserConnected",this.$store.state.loggedUser.username),this.listen()}},de=pe,me=(r("9c66"),Object(d["a"])(de,ae,ce,!1,null,null,null)),fe=me.exports;o["default"].use(g["a"]);var ge=[{path:"/",name:"movies",component:I},{path:"/signup",name:"signup",component:L},{path:"/login",name:"login",component:G},{path:"/settings",name:"settings",component:J,meta:{requiresAuth:!0}},{path:"/movies/movie/:id",name:"movie",component:ie,meta:{requiresAuth:!0}},{path:"/chat",name:"chat",component:fe,meta:{requiresAuth:!0}}],ve=new g["a"]({routes:ge});ve.beforeEach((function(e,t,r){Y.state.errorMsg&&Y.commit("SET_ERROR_MSG",""),0===Object.entries(Y.state.loggedUser).length&&Y.state.loggedUser.constructor===Object&&localStorage.getItem("jwt")&&localStorage.removeItem("jwt"),e.matched.some((function(e){return e.meta.requiresAuth}))?null===localStorage.getItem("jwt")?r({name:"login"}):r():null===localStorage.getItem("jwt")?r():"login"===e.name||"signup"===e.name?r({name:"movies"}):r()}));var he=ve,be=r("ee98"),Oe=r.n(be);o["default"].config.productionTip=!1,o["default"].use(Oe.a),new o["default"]({router:he,store:Y,render:function(e){return e(f)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";var o=r("9c0c"),n=r.n(o);n.a},8264:function(e,t,r){},"9c0c":function(e,t,r){},"9c66":function(e,t,r){"use strict";var o=r("8264"),n=r.n(o);n.a},b157:function(e,t,r){e.exports=r.p+"img/25.47d24917.gif"},c2fb:function(e,t,r){e.exports=r.p+"img/logo_transparent.60543ff1.png"},d0a2:function(e,t,r){e.exports=r.p+"img/cinema.37aaf816.jpg"},e1c8:function(e,t,r){"use strict";var o=r("3f57"),n=r.n(o);n.a},f2cc:function(e,t,r){"use strict";var o=r("17f6"),n=r.n(o);n.a},fa0d:function(e,t,r){}});
//# sourceMappingURL=app.1603963b.js.map